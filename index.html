<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frise Chronologique Interactive</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Menu latÃ©ral -->
  <div id="sidebar" class="sidebar">
    <button id="toggleMenu" class="toggle-btn" aria-label="Basculer le menu">â—€</button>

    <div class="sidebar-content">
      <!-- Ajouter des Ã©lÃ©ments (prioritÃ©) -->
      <h2>Ajouter des Ã©lÃ©ments</h2>
      <button class="btn btn-blue" onclick="showEventModal()">â• Ajouter Ã©vÃ©nement</button>
      <button class="btn btn-purple" onclick="showPeriodModal()">â• Ajouter pÃ©riode</button>
      <button class="btn btn-green" onclick="showArtistModal()">â• Ajouter artiste</button>

      <hr style="margin: 20px 0; border: none; border-top: 1px solid #E8DCC8;" />

      <!-- ParamÃ¨tres repliables -->
      <div class="collapsible-section">
        <h2 class="collapsible-header" onclick="toggleSection('friseSettings')">
          <span class="toggle-icon">â–¼</span> ParamÃ¨tres de la frise
        </h2>
        <div id="friseSettings" class="collapsible-content collapsed">
          <div class="form-group">
            <label for="startYear">AnnÃ©e dÃ©but</label>
            <input type="number" id="startYear" value="-500" />
          </div>

          <div class="form-group">
            <label for="endYear">AnnÃ©e fin</label>
            <input type="number" id="endYear" value="2000" />
          </div>

          <div class="form-group">
            <label for="scale">Ã‰chelle (graduation principale)</label>
            <input type="number" id="scale" value="50" min="1" max="500" />
            <small style="display: block; margin-top: 5px; color: #7C1D1D; font-size: 11px;">
              ğŸ’¡ Plus l'Ã©chelle est petite, plus la frise est longue
            </small>
            <div style="display: flex; gap: 5px; margin-top: 8px;">
              <button class="btn-mini" onclick="setScale(100)" style="flex: 1;">Compact</button>
              <button class="btn-mini" onclick="setScale(50)" style="flex: 1;">Normal</button>
              <button class="btn-mini" onclick="setScale(25)" style="flex: 1;">Ã‰tendu</button>
              <button class="btn-mini" onclick="setScale(10)" style="flex: 1;">TrÃ¨s Ã©tendu</button>
            </div>
          </div>

          <div class="form-group">
            <label for="pagesH">Pages horizontales</label>
            <input type="number" id="pagesH" min="1" max="10" value="3" />
          </div>

          <div class="form-group">
            <label for="pagesV">Pages verticales</label>
            <input type="number" id="pagesV" min="1" max="10" value="2" />
          </div>

          <div class="form-group">
            <label for="timelineThickness">Ã‰paisseur de la frise</label>
            <input type="range" id="timelineThickness" min="20" max="80" value="40" />
          </div>

          <div class="form-group">
            <label for="timelineY">Position frise (Y)</label>
            <input type="range" id="timelineY" min="50" max="2000" value="300" />
          </div>

          <div class="form-group">
            <label for="zoomLevel">Zoom</label>
            <input type="range" id="zoomLevel" min="0.5" max="3" step="0.1" value="1" />
          </div>

          <div class="form-group">
            <label for="bgColor">Couleur du fond</label>
            <input type="color" id="bgColor" value="#F5F0E8" />
            <button class="btn btn-secondary" onclick="applyBackgroundColor()" style="margin-top: 5px;">
              Appliquer
            </button>
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" id="showGrid" checked />
              Afficher le quadrillage
            </label>
          </div>

          <button class="btn btn-primary" onclick="centerOnYearZero()">ğŸ“ Centrer sur l'annÃ©e 0</button>
          <button class="btn btn-secondary" onclick="resetView()">ğŸ”„ RÃ©initialiser la vue</button>
        </div>
      </div>
      
      <hr style="margin: 20px 0; border: none; border-top: 1px solid #E8DCC8;" />

      <div id="textStyleTools" style="display:none; padding: 15px; background: #F5F0E8; border-radius: 8px;">
        <h3 style="margin-bottom: 10px;">Texte sÃ©lectionnÃ© (PÃ©riodes/Artistes)</h3>
        <small style="display: block; margin-bottom: 10px; color: #7C1D1D; font-size: 11px;">
          ğŸ’¡ Les Ã©vÃ©nements ont des tailles fixes : titre 23px, date 20px gras
        </small>
        <div class="form-group">
          <label for="selectedTextSize">Taille</label>
          <input type="range" id="selectedTextSize" min="8" max="32" value="12" />
          <span id="selectedTextSizeValue">12px</span>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="selectedTextBold" /> Gras
          </label>
        </div>
      </div>

      <div id="selectedItemActions" style="display:none; margin-top: 15px;">
        <h3>Ã‰lÃ©ment sÃ©lectionnÃ©</h3>
        <button class="btn btn-warning" onclick="editSelectedItem()">âœï¸ Modifier</button>
        <button class="btn btn-danger" onclick="deleteSelectedItem()">ğŸ—‘ï¸ Supprimer</button>
      </div>

      <hr style="margin: 20px 0; border: none; border-top: 1px solid #E8DCC8;" />

      <h3>Sauvegarde</h3>
      <button class="btn btn-success" onclick="saveToFile()">ğŸ’¾ TÃ©lÃ©charger sauvegarde</button>
      <input type="file" id="loadFile" accept=".json" style="display: none;" onchange="loadFromFile(event)" />
      <button class="btn btn-secondary" onclick="document.getElementById('loadFile').click()">ğŸ“‚ Charger sauvegarde</button>
      <button class="btn btn-success" onclick="saveToLocalStorage()">ğŸ’¾ Sauvegarder (navigateur)</button>
      <button class="btn btn-secondary" onclick="loadFromLocalStorage()">ğŸ“‚ Charger (navigateur)</button>

      <hr style="margin: 20px 0; border: none; border-top: 1px solid #E8DCC8;" />

      <div style="padding: 12px; background: #E8DCC8; border-radius: 6px; font-size: 12px; color: #2D3436;">
        <strong>Raccourcis clavier :</strong>
        <ul style="margin-top: 8px; padding-left: 20px;">
          <li><kbd>ESC</kbd> - Fermer / DÃ©sÃ©lectionner</li>
          <li><kbd>Suppr</kbd> - Supprimer sÃ©lection</li>
          <li><kbd>Ctrl+S</kbd> - Sauvegarder</li>
          <li><kbd>EntrÃ©e</kbd> - Valider modal</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Zone de canvas -->
  <div id="canvasContainer" class="canvas-container">
    <canvas id="timeline"></canvas>
    <div id="eventsContainer"></div>
  </div>

  <!-- Modal Ã‰vÃ©nement -->
  <div id="eventModal" class="modal" role="dialog" aria-labelledby="eventModalTitle">
    <div class="modal-content">
      <h3 id="eventModalTitle">Ajouter un Ã©vÃ©nement</h3>
      <input type="text" id="eventName" placeholder="Nom de l'Å“uvre" aria-label="Nom de l'Ã©vÃ©nement" />
      <input type="number" id="eventYear" placeholder="AnnÃ©e" aria-label="AnnÃ©e de l'Ã©vÃ©nement" />
      <input type="file" id="eventImage" accept="image/*" aria-label="Image de l'Ã©vÃ©nement" />
      <img id="eventPreview" style="display:none; max-width:100%; max-height:150px;" alt="AperÃ§u" />
      <div class="modal-buttons">
        <button class="btn btn-blue" onclick="saveEvent()">Ajouter</button>
        <button class="btn btn-secondary" onclick="closeModals()">Annuler</button>
      </div>
    </div>
  </div>

  <!-- Modal PÃ©riode -->
  <div id="periodModal" class="modal" role="dialog" aria-labelledby="periodModalTitle">
    <div class="modal-content">
      <h3 id="periodModalTitle">Ajouter une pÃ©riode</h3>
      <input type="text" id="periodName" placeholder="Nom de la pÃ©riode" aria-label="Nom de la pÃ©riode" />
      <input type="number" id="periodStart" placeholder="AnnÃ©e dÃ©but" aria-label="AnnÃ©e de dÃ©but" />
      <input type="number" id="periodEnd" placeholder="AnnÃ©e fin" aria-label="AnnÃ©e de fin" />
      <input type="color" id="periodColor" value="#7C1D1D" aria-label="Couleur de la pÃ©riode" />
      <div class="form-group">
        <label for="periodHeight">Ã‰paisseur de la barre</label>
        <input type="range" id="periodHeight" min="20" max="120" value="40" />
        <span id="periodHeightValue">40px</span>
      </div>
      <div class="modal-buttons">
        <button class="btn btn-purple" onclick="savePeriod()">Ajouter</button>
        <button class="btn btn-secondary" onclick="closeModals()">Annuler</button>
      </div>
    </div>
  </div>

  <!-- Modal Artiste -->
  <div id="artistModal" class="modal" role="dialog" aria-labelledby="artistModalTitle">
    <div class="modal-content">
      <h3 id="artistModalTitle">Ajouter un artiste</h3>
      <input type="text" id="artistName" placeholder="Nom de l'artiste" aria-label="Nom de l'artiste" />
      <input type="number" id="artistBirth" placeholder="AnnÃ©e de naissance" aria-label="AnnÃ©e de naissance" />
      <input type="number" id="artistDeath" placeholder="AnnÃ©e de dÃ©cÃ¨s" aria-label="AnnÃ©e de dÃ©cÃ¨s" />
      <div class="modal-buttons">
        <button class="btn btn-green" onclick="saveArtist()">Ajouter</button>
        <button class="btn btn-secondary" onclick="closeModals()">Annuler</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
